---
import { getCollection } from 'astro:content';
import '../styles/TrendingNews.css';

const posts = await getCollection('news');
const trendingPosts = posts
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 5);
---

<div class="trending-news">
  <div class="trending-header">
    <span class="trending-label">TRENDING</span>
    <div class="trending-indicator"></div>
  </div>
  <ul class="trending-list" id="trendingList">
    {trendingPosts.map(post => (
      <li class="trending-item">
        <a href={`/news/${post.slug}`}>
          <span class="trending-title">{post.data.title}</span>
          <span class="trending-source">{post.data.source}</span>
        </a>
      </li>
    ))}
  </ul>
</div>

<script>
  import { updateTrendingNews } from '../utils/trending';
  
  // Update trending news every 10 seconds
  setInterval(updateTrendingNews, 10000);
</script>